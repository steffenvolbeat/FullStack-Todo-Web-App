(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79119,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function r({onAddTodo:e}){let[r,i]=(0,t.useState)(""),[d,n]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),l=async s=>{if(s.preventDefault(),r.trim()){o(!0);try{await e(r.trim(),d.trim())&&(i(""),n(""))}finally{o(!1)}}};return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"âœ¨ Neues Todo hinzufÃ¼gen"}),(0,s.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-200 mb-2",children:"Titel *"}),(0,s.jsx)("input",{id:"title",type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Was mÃ¶chtest du erledigen?",maxLength:255,required:!0,disabled:a,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm placeholder-gray-400 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 disabled:bg-gray-600 disabled:cursor-not-allowed"}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-gray-400",children:[r.length,"/255 Zeichen"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-200 mb-2",children:"Beschreibung (optional)"}),(0,s.jsx)("textarea",{id:"description",value:d,onChange:e=>n(e.target.value),placeholder:"Weitere Details zu deinem Todo...",rows:3,disabled:a,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm placeholder-gray-400 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 disabled:bg-gray-600 disabled:cursor-not-allowed resize-none"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:!r.trim()||a,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Wird hinzugefÃ¼gt..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"âž•"}),"Todo hinzufÃ¼gen"]})})})]})]})}function i({todo:e,onUpdate:r,onDelete:i,index:d}){let[n,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(e.title),[c,m]=(0,t.useState)(e.description||""),[x,h]=(0,t.useState)(!1),[u,g]=(0,t.useState)(!1),b=async()=>{h(!0);try{await r(e.id,{completed:!e.completed})}finally{h(!1)}},f=async()=>{if(o.trim()){h(!0);try{await r(e.id,{title:o.trim(),description:c.trim()||null})&&a(!1)}finally{h(!1)}}},p=async()=>{if(confirm("MÃ¶chtest du dieses Todo wirklich lÃ¶schen?")){g(!0);try{await i(e.id)}finally{g(!1)}}},y=e=>new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,s.jsx)("div",{className:`p-6 hover:bg-gray-700 transition-colors animate-slide-up ${e.completed?"opacity-75":""}`,style:{animationDelay:`${50*d}ms`},children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("button",{onClick:b,disabled:x||u,className:`flex-shrink-0 mt-1 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:cursor-not-allowed ${e.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-indigo-500"}`,children:x?(0,s.jsx)("div",{className:"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin"}):e.completed?(0,s.jsx)("span",{className:"text-xs",children:"âœ“"}):null}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:n?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Titel",maxLength:255,className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm placeholder-gray-400 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400"}),(0,s.jsx)("textarea",{value:c,onChange:e=>m(e.target.value),placeholder:"Beschreibung (optional)",rows:2,className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md shadow-sm placeholder-gray-400 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 resize-none"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:f,disabled:!o.trim()||x,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Speichert...":"Speichern"}),(0,s.jsx)("button",{onClick:()=>{a(!1),l(e.title),m(e.description||"")},disabled:x,className:"px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Abbrechen"})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:`text-lg font-medium ${e.completed?"line-through text-gray-400":"text-white"}`,children:e.title}),e.description&&(0,s.jsx)("p",{className:`mt-1 text-sm ${e.completed?"line-through text-gray-500":"text-gray-300"}`,children:e.description}),(0,s.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-400",children:[(0,s.jsxs)("span",{children:["Erstellt: ",y(e.createdAt)]}),e.updatedAt!==e.createdAt&&(0,s.jsxs)("span",{children:["GeÃ¤ndert: ",y(e.updatedAt)]})]})]})}),!n&&(0,s.jsxs)("div",{className:"flex-shrink-0 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{a(!0),l(e.title),m(e.description||"")},disabled:x||u,className:"p-2 text-gray-400 hover:text-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-400 rounded disabled:cursor-not-allowed",title:"Bearbeiten",children:(0,s.jsx)("span",{className:"text-sm",children:"âœï¸"})}),(0,s.jsx)("button",{onClick:p,disabled:x||u,className:"p-2 text-gray-400 hover:text-red-400 focus:outline-none focus:ring-2 focus:ring-red-400 rounded disabled:cursor-not-allowed",title:"LÃ¶schen",children:u?(0,s.jsx)("div",{className:"w-4 h-4 border border-current border-t-transparent rounded-full animate-spin"}):(0,s.jsx)("span",{className:"text-sm",children:"ðŸ—‘ï¸"})})]})]})})}function d({todos:e,onUpdateTodo:t,onDeleteTodo:r}){if(0===e.length)return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-lg p-8 text-center border border-gray-700",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“"}),(0,s.jsx)("h3",{className:"text-xl font-medium text-white mb-2",children:"Keine Todos vorhanden"}),(0,s.jsx)("p",{className:"text-gray-400",children:"FÃ¼ge dein erstes Todo hinzu, um zu starten!"})]});let d=[...e].sort((e,s)=>e.completed===s.completed?new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime():e.completed?1:-1);return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700",children:[(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-900 border-b border-gray-600",children:(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["ðŸ“‹ Deine Todos (",e.length,")"]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-600",children:d.map((e,d)=>(0,s.jsx)(i,{todo:e,onUpdate:t,onDelete:r,index:d},e.id))})]})}function n(){return(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"LÃ¤dt Todos..."}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Einen Moment bitte"})]})]})})}function a(){let[e,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),m=async()=>{try{o(!0),c(null);let e=await fetch("/api/todos"),s=await e.json();if(s.success&&s.data)i(s.data);else throw Error(s.message||"Fehler beim Laden der Todos")}catch(e){console.error("Fehler beim Laden der Todos:",e),c(e instanceof Error?e.message:"Unbekannter Fehler")}finally{o(!1)}},x=async(e,s)=>{try{let t=await fetch("/api/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:s})}),r=await t.json();if(r.success&&r.data)return i(e=>[r.data,...e]),!0;throw Error(r.message||"Fehler beim Erstellen des Todos")}catch(e){return console.error("Fehler beim Erstellen des Todos:",e),c(e instanceof Error?e.message:"Fehler beim Erstellen"),!1}},h=async(e,s)=>{try{let t=await fetch(`/api/todos/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await t.json();if(r.success&&r.data)return i(s=>s.map(s=>s.id===e?r.data:s)),!0;throw Error(r.message||"Fehler beim Aktualisieren des Todos")}catch(e){return console.error("Fehler beim Aktualisieren des Todos:",e),c(e instanceof Error?e.message:"Fehler beim Aktualisieren"),!1}},u=async e=>{try{let s=await fetch(`/api/todos/${e}`,{method:"DELETE"}),t=await s.json();if(t.success)return i(s=>s.filter(s=>s.id!==e)),!0;throw Error(t.message||"Fehler beim LÃ¶schen des Todos")}catch(e){return console.error("Fehler beim LÃ¶schen des Todos:",e),c(e instanceof Error?e.message:"Fehler beim LÃ¶schen"),!1}};(0,t.useEffect)(()=>{m()},[]);let g=e.filter(e=>e.completed).length,b=e.length;return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[l&&(0,s.jsx)("div",{className:"bg-red-900 border border-red-700 rounded-lg p-4 animate-fade-in",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("span",{className:"text-red-400 text-xl",children:"âš ï¸"})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm font-medium text-red-100",children:l})}),(0,s.jsx)("div",{className:"ml-auto pl-3",children:(0,s.jsxs)("button",{onClick:()=>c(null),className:"inline-flex bg-red-900 rounded-md p-1.5 text-red-400 hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-900 focus:ring-red-400",children:[(0,s.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,s.jsx)("span",{className:"text-lg",children:"Ã—"})]})})]})}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:b}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Gesamt"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-400",children:g}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Erledigt"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:b-g}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Offen"})]})]})}),(0,s.jsx)(r,{onAddTodo:x}),a?(0,s.jsx)(n,{}):(0,s.jsx)(d,{todos:e,onUpdateTodo:h,onDeleteTodo:u}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("button",{onClick:m,disabled:a,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"LÃ¤dt..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mr-2",children:"ðŸ”„"}),"Aktualisieren"]})})})]})}e.s(["default",()=>a],79119)}]);